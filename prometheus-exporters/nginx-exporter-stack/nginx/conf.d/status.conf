# Dedicated status server on an internal port.
# NOT published to host; only reachable inside Docker network.
server {
  listen 8080;
  server_name 127.0.0.1;

  location = /stub_status {
    stub_status;
    access_log off;

    # Allow only RFC1918 ranges; tighten to your actual docker subnet if possible.
    allow 172.16.0.0/12;
    allow 192.168.0.0/16;
    allow 10.0.0.0/8;
    deny all;
  }
}
