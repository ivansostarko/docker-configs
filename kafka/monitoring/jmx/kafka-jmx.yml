startDelaySeconds: 0
ssl: false
lowercaseOutputName: true
lowercaseOutputLabelNames: true

rules:
  - pattern: 'kafka.server<type=BrokerTopicMetrics, name=(BytesInPerSec|BytesOutPerSec|MessagesInPerSec)><>Count'
    name: kafka_server_brokertopicmetrics_$1_total
    type: COUNTER

  - pattern: 'kafka.network<type=RequestMetrics, name=(RequestsPerSec), request=(.+)><>Count'
    name: kafka_network_requestmetrics_$1_total
    labels:
      request: "$2"
    type: COUNTER

  - pattern: 'kafka.server<type=ReplicaManager, name=UnderReplicatedPartitions><>Value'
    name: kafka_server_under_replicated_partitions
    type: GAUGE

  - pattern: 'kafka.controller<type=KafkaController, name=ActiveControllerCount><>Value'
    name: kafka_controller_active_controller_count
    type: GAUGE

  - pattern: 'java.lang<type=Memory><>HeapMemoryUsage.used'
    name: jvm_heap_used_bytes
    type: GAUGE
