cluster.name: ${CLUSTER_NAME}
network.host: 0.0.0.0

# Node discovery
discovery.seed_hosts: ["es01","es02","es03"]
cluster.initial_master_nodes: ["es01","es02","es03"]

# Roles: keep all-in-one for simplicity; split roles in real deployments.
node.roles: [ master, data, ingest ]

# Security + TLS
xpack.security.enabled: true

xpack.security.transport.ssl.enabled: true
xpack.security.transport.ssl.verification_mode: certificate
xpack.security.transport.ssl.client_authentication: required

xpack.security.http.ssl.enabled: true

# Reduce cluster noise for labs; tune for production.
indices.recovery.max_bytes_per_sec: 80mb

    node.name: es03

    # Transport (node-to-node) TLS
    xpack.security.transport.ssl.key: certs/es03/es03.key
    xpack.security.transport.ssl.certificate: certs/es03/es03.crt
    xpack.security.transport.ssl.certificate_authorities: [ "certs/ca/ca.crt" ]

    # HTTP (client) TLS
    xpack.security.http.ssl.key: certs/es03/es03.key
    xpack.security.http.ssl.certificate: certs/es03/es03.crt
    xpack.security.http.ssl.certificate_authorities: [ "certs/ca/ca.crt" ]

    # Optional: set this if you want to keep cluster from allocating replicas on same node
    # cluster.routing.allocation.same_shard.host: true
